<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Practicar Palabras</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    #wordDisplay {
      font-size: 24px;
      margin-bottom: 10px;
    }
    #inputArea {
      margin-bottom: 10px;
    }
    input {
      padding: 8px;
      font-size: 18px;
      width: 100%;
    }
    button {
      margin-top: 10px;
      padding: 8px;
      font-size: 16px;
    }
    #savedWordsList {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Pr√°ctica de palabras</h1>
  <label>
    <input type="checkbox" id="practiceSavedOnly" />
    Practicar solo palabras guardadas
  </label>
  <div id="wordDisplay">Escribe la palabra aqu√≠:</div>
  <div id="inputArea">
    <input type="text" id="userInput" placeholder="Escribe la palabra aqu√≠..." />
  </div>
  <button id="repeatNormal">üîä Repetir</button>
  <button id="repeatSlow">üê¢ Repetir lento</button>
  <button id="saveWord">‚≠ê Guardar palabra</button>
  <button id="nextWord">‚è≠Ô∏è Siguiente palabra</button>

  <div id="savedWordsList">
    <h2>Palabras guardadas:</h2>
    <ul id="wordList"></ul>
  </div>

  <script>
    const allWords = [
      "apple", "banana", "computer", "school", "beautiful", "challenge",
      "future", "learning", "amazing", "language"
    ];

    let savedWords = JSON.parse(localStorage.getItem("savedWords")) || [];
    let currentWord = "";
    const wordDisplay = document.getElementById("wordDisplay");
    const userInput = document.getElementById("userInput");
    const wordList = document.getElementById("wordList");

    function speakWord(word, rate = 1) {
      const utterance = new SpeechSynthesisUtterance(word);
      utterance.lang = "en-US";
      utterance.rate = rate;
      speechSynthesis.speak(utterance);
    }

    function pickWord() {
      const useSaved = document.getElementById("practiceSavedOnly").checked;
      const pool = useSaved && savedWords.length > 0 ? savedWords : allWords;
      currentWord = pool[Math.floor(Math.random() * pool.length)];
      wordDisplay.textContent = "Escribe la palabra aqu√≠:";
      userInput.value = "";
      speakWord(currentWord);
    }

    document.getElementById("nextWord").addEventListener("click", pickWord);

    document.getElementById("repeatNormal").addEventListener("click", () => {
      speakWord(currentWord, 1);
    });

    document.getElementById("repeatSlow").addEventListener("click", () => {
      speakWord(currentWord, 0.5);
    });

    document.getElementById("saveWord").addEventListener("click", () => {
      if (!savedWords.includes(currentWord)) {
        savedWords.push(currentWord);
        localStorage.setItem("savedWords", JSON.stringify(savedWords));
        updateSavedList();
      }
    });

    function updateSavedList() {
      wordList.innerHTML = "";
      savedWords.forEach((word, index) => {
        const li = document.createElement("li");
        li.textContent = word + " ";
        const delBtn = document.createElement("button");
        delBtn.textContent = "‚ùå";
        delBtn.onclick = () => {
          savedWords.splice(index, 1);
          localStorage.setItem("savedWords", JSON.stringify(savedWords));
          updateSavedList();
        };
        const playBtn = document.createElement("button");
        playBtn.textContent = "üîä";
        playBtn.onclick = () => {
          speakWord(word);
        };
        li.appendChild(playBtn);
        li.appendChild(delBtn);
        wordList.appendChild(li);
      });
    }

    userInput.addEventListener("input", () => {
      if (userInput.value.trim().toLowerCase() === currentWord.toLowerCase()) {
        wordDisplay.textContent = currentWord;
      }
    });

    window.onload = () => {
      updateSavedList();
      pickWord();
    };
  </script>
</body>
</html>
